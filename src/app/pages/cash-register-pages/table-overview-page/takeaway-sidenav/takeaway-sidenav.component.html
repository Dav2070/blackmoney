<dav-sidenav #takeawaySidenav mode="over">
	<div class="takeaway-header">
		<dav-icon-button
			size="sm"
			[tooltip]="locale.takeaway.close"
			(click)="closeSidenav()"
		>
			<fa-icon [icon]="faArrowLeft"></fa-icon>
		</dav-icon-button>
		<h2>{{ locale.takeaway.headline }}</h2>
		<dav-icon-button
			size="sm"
			[tooltip]="locale.takeaway.add"
			(click)="openAddDialog()"
		>
			<fa-icon [icon]="faPlus"></fa-icon>
		</dav-icon-button>
	</div>

	<div class="takeaway-filters">
		<dav-icon-button
			size="sm"
			[tooltip]="locale.takeaway.filterAll"
			[class.active]="takeawayFilter === 'ALL'"
			(click)="setFilter('ALL')"
		>
			{{ locale.takeaway.filterAll }}
		</dav-icon-button>

		<dav-icon-button
			size="sm"
			[tooltip]="locale.takeaway.filterDelivery"
			[class.active]="takeawayFilter === 'DELIVERY'"
			(click)="setFilter('DELIVERY')"
		>
			<fa-icon [icon]="faTruck"></fa-icon>
		</dav-icon-button>

		<dav-icon-button
			size="sm"
			[tooltip]="locale.takeaway.filterPickUp"
			[class.active]="takeawayFilter === 'PICKUP'"
			(click)="setFilter('PICKUP')"
		>
			<fa-icon [icon]="faBagShopping"></fa-icon>
		</dav-icon-button>

		<dav-icon-button
			size="sm"
			[tooltip]="locale.takeaway.filterDineIn"
			[class.active]="takeawayFilter === 'DINEIN'"
			(click)="setFilter('DINEIN')"
		>
			<fa-icon [icon]="faUtensils"></fa-icon>
		</dav-icon-button>
	</div>

	<div class="takeaway-orders-container">
		@if (filteredOrders.length === 0) {
			<p class="no-orders-message">{{ locale.takeaway.noOrders }}</p>
		} @else {
			@for (order of filteredOrders; track order.uuid) {
				<dav-card
					class="takeaway-order-card clickable"
					(click)="navigateToOrder(order.uuid)"
				>
					<div class="order-header">
						<h3 class="order-name">
							{{ order.takeawayDetails.name }}
						</h3>
						<span class="order-price"
							>{{ getOrderTotalPrice(order).toFixed(2) }} â‚¬</span
						>
					</div>

					<div class="order-content">
						@if (order.takeawayDetails.delivery) {
							<dav-icon-button
								class="order-type"
								(click)="
									openViewDialog(order); $event.stopPropagation()
								"
							>
								<fa-icon [icon]="faTruck"></fa-icon>
							</dav-icon-button>
						} @else if (order.takeawayDetails.pickUp) {
							<dav-icon-button
								class="order-type"
								(click)="
									openViewDialog(order); $event.stopPropagation()
								"
							>
								<fa-icon [icon]="faBagShopping"></fa-icon>
							</dav-icon-button>
						} @else if (order.takeawayDetails.dineIn) {
							<dav-icon-button
								class="order-type"
								(click)="
									openViewDialog(order); $event.stopPropagation()
								"
							>
								<fa-icon [icon]="faUtensils"></fa-icon>
							</dav-icon-button>
						}
					</div>

					<div class="order-footer">
						<span class="order-time">--:--</span>
						<dav-icon-button
							size="sm"
							[tooltip]="locale.takeaway.delete"
							(click)="
								deleteOrder(order.uuid);
								$event.stopPropagation();
								$event.preventDefault()
							"
						>
							<fa-icon [icon]="faTrash"></fa-icon>
						</dav-icon-button>
					</div>
				</dav-card>
			}
		}
	</div>
</dav-sidenav>

<app-add-takeaway-dialog
	#addTakeawayDialog
	(primaryButtonClick)="handleAddDialogPrimaryClick($event)"
></app-add-takeaway-dialog>

<app-view-takeaway-dialog
	#viewTakeawayDialog
	(editButtonClick)="handleViewDialogEditClick($event)"
></app-view-takeaway-dialog>

<app-edit-takeaway-dialog
	#editTakeawayDialog
	(primaryButtonClick)="handleEditDialogPrimaryClick($event)"
></app-edit-takeaway-dialog>
