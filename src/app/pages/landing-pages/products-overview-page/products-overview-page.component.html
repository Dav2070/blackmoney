<div class="container slide-up-in">
	<div class="content-container">
		<dav-header
			backButtonVisible
			addButtonVisible
			(backButtonClick)="navigateBack()"
		>
			{{ locale.headline }}
		</dav-header>

		<div class="separator"></div>

		<!-- Produktkarten der ausgewählten Kategorie -->
		@if (selectedCategoryObj?.products?.length > 0) {
			@for (product of selectedCategoryObj.products; track product.uuid) {
				<dav-card class="product-card">
					<div class="product-info-row">
						<div class="product-info">
							<b>ID:</b> {{ product.id }}<br />
							<b>Name:</b> {{ product.name }}<br />
							<b>Preis:</b>
							{{ product.price | currency: "EUR" : "symbol" : "1.2-2"
							}}<br />
							<b>Variationen:</b>
							<span *ngIf="product.variations?.length > 0; else noVar">
								<span
									*ngFor="let v of product.variations; let last = last"
								>
									{{ v.name }}<span *ngIf="!last">, </span>
								</span>
							</span>
							<ng-template #noVar><span>Keine</span></ng-template
							><br />
							<b>Außerhaus:</b> {{ product.takeaway ? "Ja" : "Nein" }}
						</div>
						<div class="product-actions">
							<dav-icon-button size="sm" (click)="editProduct(product)">
								<fa-icon [icon]="faPen"></fa-icon>
							</dav-icon-button>
							<dav-icon-button
								size="sm"
								(click)="deleteProduct(product)"
							>
								<fa-icon [icon]="faTrash"></fa-icon>
							</dav-icon-button>
						</div>
					</div>
				</dav-card>
			}
		} @else {
			<p class="no-products">Keine Produkte in dieser Kategorie.</p>
		}
	</div>

	<div class="sidenav-container">
		@if (categories.length > 0) {
			<dav-sidenav>
				<!-- Dynamic categories -->
				@for (category of categories; track category.uuid) {
					<dav-sidenav-item
						[value]="category.name"
						[active]="selectedCategory === category.uuid"
						(click)="selectCategory(category)"
					></dav-sidenav-item>
				}
			</dav-sidenav>
		}
	</div>
</div>
