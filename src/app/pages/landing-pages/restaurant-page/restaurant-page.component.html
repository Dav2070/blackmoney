<div class="container slide-up-in">
	<div class="content-container">
		<dav-header
			backButtonVisible
			editButtonVisible
			(backButtonClick)="navigateBack()"
			(editButtonClick)="showEditRestaurantNameDialog()"
		>
			{{ name }}
		</dav-header>

		<dav-card>
			<div class="address-card-container">
				<fa-icon [icon]="faLocationDot"></fa-icon>

				<div class="address-card-content">
					@if (city || country || line1 || line2 || postalCode) {
						@if (line1) {
							<p>{{ line1 }}</p>
						}
						@if (line2) {
							<p>{{ line2 }}</p>
						}
						@if (postalCode || city) {
							<p>{{ postalCode }} {{ city }}</p>
						}
						@if (country) {
							<p>{{ country === "DE" ? "Deutschland" : "" }}</p>
						}
					} @else {
						<p class="no-address">{{ locale.addAddress }}</p>
					}
				</div>

				<dav-icon-button size="xs" (click)="showEditAddressDialog()">
					<fa-icon [icon]="faPen"></fa-icon>
				</dav-icon-button>
			</div>
		</dav-card>

		<dav-card>
			<div class="address-card-container">
				<fa-icon [icon]="faLocationDot"></fa-icon>

				<div class="address-card-content">
					@if (owner || taxNumber) {
						@if (owner) {
							<p>{{ owner }}</p>
						}
						@if (taxNumber) {
							<p>{{ taxNumber }}</p>
						}
					} 
				</div>

				<dav-icon-button size="xs" (click)="showEditOwnerDialog()">
					<fa-icon [icon]="faPen"></fa-icon>
				</dav-icon-button>
			</div>
		</dav-card>

		<dav-card>
			<div class="address-card-container">
				<fa-icon [icon]="faLocationDot"></fa-icon>

				<div class="address-card-content">
					@if (mail || phoneNumber) {
						@if (mail) {
							<p>{{ mail }}</p>
						}
						@if (phoneNumber) {
							<p>{{ phoneNumber }}</p>
						}
					} 
				</div>

				<dav-icon-button size="xs" (click)="showEditContactInfoDialog()">
					<fa-icon [icon]="faPen"></fa-icon>
				</dav-icon-button>
			</div>
		</dav-card>

	

		<div class="separator"></div>

		<div class="actions-container">

			<dav-icon-card
				[text]="locale.manageTime"
				[href]="'/user/restaurants/' + uuid + '/openingTime'"
				(click)="navigateToTimePage($event)"
			>
				<fa-icon [icon]="faPrint"></fa-icon>
			</dav-icon-card>

			<dav-icon-card
				[text]="locale.managePrinters"
				[href]="'/user/restaurants/' + uuid + '/printers'"
				(click)="navigateToPrintersPage($event)"
			>
				<fa-icon [icon]="faPrint"></fa-icon>
			</dav-icon-card>

			<dav-icon-card
				[text]="locale.manageRooms"
				[href]="'/user/restaurants/' + uuid + '/rooms'"
				(click)="navigateToRoomsPage($event)"
			>
				<fa-icon [icon]="faSeat"></fa-icon>
			</dav-icon-card>

			<!--Image for Restaurant-->
			<dav-icon-card
			[text]="locale.addPicture"
			(click)="triggerFileInput(fileInput)"
			>

			<input
				#fileInput
				type="file"
				accept="image/*"
				(change)="onFileSelected($event)"
				hidden
			/>

			</dav-icon-card>
			<div class="image-preview" *ngIf="imageDataUrl">
				<img [src]="imageDataUrl"/>
			</div>
			
			


		</div>
	</div>
</div>

<app-edit-restaurant-name-dialog
	#editRestaurantNameDialog
	[loading]="editRestaurantNameDialogLoading"
	[name]="name"
	[nameError]="nameError"
	(primaryButtonClick)="editRestaurantNameDialogPrimaryButtonClick($event)"
	(clearErrors)="nameError = ''"
></app-edit-restaurant-name-dialog>

<app-edit-address-dialog
	#editAddressDialog
	[loading]="editAddressDialogLoading"
	[city]="city"
	[cityError]="cityError"
	[line1]="line1"
	[line1Error]="line1Error"
	[line2]="line2"
	[line2Error]="line2Error"
	[postalCode]="postalCode"
	[postalCodeError]="postalCodeError"
	(primaryButtonClick)="editAddressDialogPrimaryButtonClick($event)"
	(clearErrors)="
		cityError = ''; line1Error = ''; line2Error = ''; postalCodeError = ''
	"
></app-edit-address-dialog>

<app-edit-owner-dialog
	#editOwnerDialog
	[loading]="editOwnerDialogLoading"
	[owner]="owner"
	[ownerError]="ownerError"
	[taxNumber]="taxNumber"
	[taxNumberError]="taxNumberError"
	(primaryButtonClick)="editOwnerDialogPrimaryButtonClick($event)"
	(clearErrors)="
		ownerError = ''; taxNumberError = ''
	"
></app-edit-owner-dialog>

<app-edit-contact-info-dialog
	#editContactInfoDialog
	[loading]="editContactInfoDialogLoading"
	[mail]="mail"
	[mailError]="mailError"
	[phoneNumber]="phoneNumber"
	[phoneNumberError]="phoneNumberError"
	(primaryButtonClick)="editContactInfoDialogPrimaryButtonClick($event)"
	(clearErrors)="
		mailError = ''; phoneNumberError = ''
	"
></app-edit-contact-info-dialog>